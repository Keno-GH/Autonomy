<?xml version="1.0" encoding="utf-8"?>
<Defs>
	<!-- Construction Skill InfoGiver -->
	<Autonomy.InfoGiverDef>
		<defName>ConstructionSkillAverage</defName>
		<label>Construction skill average</label>
		<description>Tracks each pawn's construction skill individually for personalized construction priority</description>
		<isLocalizable>false</isLocalizable>
		<isIndividualizable>true</isIndividualizable>
		<calculation>Avg</calculation>
		<isUrgent>false</isUrgent>
		<sourceType>pawnStat</sourceType>
		<targetStat>Construction</targetStat>
        
		<filters>
			<include>
				<li>player</li>
			</include>
			<exclude>
				<li>dead</li>
				<li>downed</li>
			</exclude>
		</filters>
	</Autonomy.InfoGiverDef>

	<!-- Construction Priority Giver -->
	<Autonomy.PriorityGiverDef>
		<defName>ConstructionSkillPriority</defName>
		<label>Construction skill-based priority</label>
		<description>Adjusts construction priority based on individual pawn's construction skill vs colony average</description>
		<isUrgent>false</isUrgent>
        
		<conditions>
			<li>
				<type>infoGiver</type>
				<infoDefName>ConstructionSkillAverage</infoDefName>
				<infoRange>-999~999</infoRange>
				<requestLocalizedData>false</requestLocalizedData>
				<requestIndividualData>true</requestIndividualData>
				<requestDistanceFromGlobal>true</requestDistanceFromGlobal>
			</li>
		</conditions>
        
		<priorityRanges>
			<li>
				<validRange>-999~0</validRange>
				<priority>-5</priority>
				<description>I'm below average at construction</description>
			</li>
			<li>
				<validRange>0.1~999</validRange>
				<priority>5</priority>
				<description>I'm above average at construction</description>
			</li>
		</priorityRanges>
        
		<!-- <targetWorkTypes>
			<li>Construction</li>
		</targetWorkTypes> -->

		<targetWorkGivers>
			<li>ConstructFinishFrames</li>
			<li>Deconstruct</li>
			<li>Repair</li>
			<li>ConstructSmoothFloors</li>
			<li>ConstructSmoothWalls</li>
		</targetWorkGivers>

	</Autonomy.PriorityGiverDef>

	<!-- Construction Speed InfoGiver -->
	<Autonomy.InfoGiverDef>
		<defName>ConstructionSpeedAverage</defName>
		<label>Construction speed average</label>
		<description>Tracks each pawn's construction speed individually for personalized construction priority</description>
		<isLocalizable>false</isLocalizable>
		<isIndividualizable>true</isIndividualizable>
		<calculation>Avg</calculation>
		<isUrgent>false</isUrgent>
		<sourceType>pawnStat</sourceType>
		<targetStat>ConstructionSpeed</targetStat>
        
		<filters>
			<include>
				<li>player</li>
			</include>
			<exclude>
				<li>dead</li>
				<li>downed</li>
			</exclude>
		</filters>
	</Autonomy.InfoGiverDef>

	<!-- Construction Speed Priority Giver -->
	<Autonomy.PriorityGiverDef>
		<defName>ConstructionSpeedPriority</defName>
		<label>Construction speed priority</label>
		<description>Adjust construction priority based on construction speed vs colony average</description>
		<isUrgent>false</isUrgent>
        
		<conditions>
			<li>
				<type>infoGiver</type>
				<infoDefName>ConstructionSpeedAverage</infoDefName>
				<infoRange>0~999</infoRange>
				<requestLocalizedData>false</requestLocalizedData>
				<requestIndividualData>true</requestIndividualData>
				<requestDistanceFromGlobal>false</requestDistanceFromGlobal>
			</li>
		</conditions>
        
		<priorityRanges>
			<li>
				<validRange>0~0.25</validRange>
				<priority>-10~-5</priority>
				<description>I am very slow at construction</description>
			</li>
			<li>
				<validRange>0.26~0.75</validRange>
				<priority>-5~0</priority>
				<description>I am slow at construction</description>
			</li>
			<li>
				<validRange>0.76~1</validRange>
				<priority>0~5</priority>
				<description>I am average speed at construction</description>
			</li>
			<li>
				<validRange>1.01~2</validRange>
				<priority>5~15</priority>
				<description>I am fast at construction</description>
			</li>
			<li>
				<validRange>2.01~999</validRange>
				<priority>15</priority>
				<description>I am very fast at construction</description>
			</li>
		</priorityRanges>
        
		<targetWorkGivers>
			<li>ConstructFinishFrames</li>
			<li>Deconstruct</li>
			<li>Repair</li>
			<li>ConstructSmoothFloors</li>
			<li>ConstructSmoothWalls</li>
		</targetWorkGivers>

	</Autonomy.PriorityGiverDef>

	<!-- Construction Speed Comparative Priority Giver -->
	<Autonomy.PriorityGiverDef>
		<defName>ConstructionSpeedComparativePriorityWithPersonality</defName>
		<label>Construction speed comparative priority</label>
		<description>Adjust construction priority based on how much faster or slower than colony average</description>
		<isUrgent>false</isUrgent>
        
		<conditions>
			<li>
				<type>infoGiver</type>
				<infoDefName>ConstructionSpeedAverage</infoDefName>
				<infoRange>-999~999</infoRange>
				<requestLocalizedData>false</requestLocalizedData>
				<requestIndividualData>true</requestIndividualData>
				<requestDistanceFromGlobal>true</requestDistanceFromGlobal>
			</li>
			<li>
				<type>personalityOffset</type>
				<personalityDefName>Rimpsyche_Confidence</personalityDefName>
				<personalityMultipliers>
					<!-- Very low confidence (insecure): 50% priority -->
					<li>
						<personalityRange>-1.0~-0.5</personalityRange>
						<multiplier>0.5</multiplier>
					</li>
                    
					<!-- Low confidence: 75% priority -->
					<li>
						<personalityRange>-0.49~0.0</personalityRange>
						<multiplier>0.75</multiplier>
					</li>
                    
					<!-- High confidence: 125% priority -->
					<li>
						<personalityRange>0.01~0.5</personalityRange>
						<multiplier>1.25</multiplier>
					</li>
                    
					<!-- Very high confidence: 150% priority -->
					<li>
						<personalityRange>0.51~1.0</personalityRange>
						<multiplier>1.5</multiplier>
					</li>
				</personalityMultipliers>
			</li>
		</conditions>
        
		<priorityRanges>
			<li>
				<validRange>-999~-0.5</validRange>
				<priority>-15~-8</priority>
				<description>I am much slower than average at construction</description>
			</li>
			<li>
				<validRange>-0.49~-0.25</validRange>
				<priority>-8~-3</priority>
				<description>I am slower than average at construction</description>
			</li>
			<li>
				<validRange>-0.24~0.24</validRange>
				<priority>-3~3</priority>
				<description>I am average speed at construction</description>
			</li>
			<li>
				<validRange>0.25~0.5</validRange>
				<priority>3~8</priority>
				<description>I am faster than average at construction</description>
			</li>
			<li>
				<validRange>0.51~999</validRange>
				<priority>8~20</priority>
				<description>I am much faster than average at construction</description>
			</li>
		</priorityRanges>
        
		<targetWorkGivers>
			<li>ConstructFinishFrames</li>
			<li>Deconstruct</li>
			<li>Repair</li>
			<li>ConstructSmoothFloors</li>
			<li>ConstructSmoothWalls</li>
		</targetWorkGivers>

	</Autonomy.PriorityGiverDef>
</Defs>
