<?xml version="1.0" encoding="utf-8" ?>
<Defs>
	<!-- Example InfoGiverDef: Count meals in colony -->
	<Autonomy.InfoGiverDef>
		<defName>ColonyMealCounter</defName>
		<label>Colony meal count</label>
		<description>Counts total number of meals available in the colony</description>
		
		<sourceType>itemCount</sourceType>
		<calculation>Sum</calculation>
		<isUrgent>false</isUrgent> <!-- Normal evaluation - not time critical -->
		
		<!-- Target ThingCategoryDefs for better mod compatibility -->
		<targetCategories>
			<li>FoodMeals</li>
		</targetCategories>
		
		<!-- Alternative: specific items if needed -->
		<!-- <targetItems>
			<li>MealSimple</li>
			<li>MealFine</li>
			<li>MealLavish</li>
			<li>MealSurvivalPack</li>
		</targetItems> -->
		
		<!-- Optional filters -->
		<filters>
			<stockpileOnly>true</stockpileOnly>
			<excludeForbidden>true</excludeForbidden>
		</filters>
	</Autonomy.InfoGiverDef>

	<!-- Example: Count injured colonists with detailed hediff filtering -->
	<Autonomy.InfoGiverDef>
		<defName>InjuredColonistCount</defName>
		<label>Injured colonist count</label>
		<description>Counts colonists with injuries, missing parts, or untended illnesses requiring medical attention</description>
		
		<sourceType>pawnCount</sourceType>
		<calculation>Count</calculation>
		
		<!-- Advanced hediff-based filtering -->
		<filters>
			<include>
				<li>player</li>
			</include>
			
			<!-- Filter for various injury types -->
			<hediffs>
				<li>
					<hediffClass>Hediff_Injury</hediffClass>
					<tendable>true</tendable>
					<hediffTended>false</hediffTended>
				</li>
				<li>
					<hediffClass>Hediff_MissingPart</hediffClass>
					<tendable>true</tendable>
					<hediffTended>false</hediffTended>
				</li>
				<li>
					<hediffClass>HediffWithComps</hediffClass>
					<tendable>true</tendable>
					<hediffTended>false</hediffTended>
				</li>
			</hediffs>
		</filters>
	</Autonomy.InfoGiverDef>

	<!-- Example: Average mood of colonists (using pawnNeed, not pawnStat) -->
	<Autonomy.InfoGiverDef>
		<defName>ColonyMoodAverage</defName>
		<label>Colony mood average</label>
		<description>Calculates the average mood of all colonists</description>
		
		<sourceType>pawnNeed</sourceType>
		<calculation>Avg</calculation>
		
		<targetNeed>Mood</targetNeed>
		
		<filters>
			<include>
				<li>player</li>
			</include>
		</filters>
	</Autonomy.InfoGiverDef>

	<!-- Example: Stone block demand with dynamic target amount -->
	<Autonomy.InfoGiverDef>
		<defName>StoneBlockDemand</defName>
		<label>Stone block construction demand</label>
		<description>Estimates stone block demand based on designated construction projects</description>
		
		<sourceType>constructionCount</sourceType>
		<calculation>Sum</calculation>
		
		<!-- Target construction materials using categories for mod compatibility -->
		<targetCategories>
			<li>StoneBlocks</li>
		</targetCategories>
		
		<filters>
			<onlyDesignated>true</onlyDesignated>
			<excludeStarted>false</excludeStarted>
		</filters>
		
		<!-- Dynamic target amount based on another InfoGiver -->
		<targetAmountSource>
			<infoDefName>ColonySize</infoDefName>
			<multiplier>50</multiplier> <!-- 50 blocks per colonist -->
		</targetAmountSource>
		<returnAsPercentage>true</returnAsPercentage>
	</Autonomy.InfoGiverDef>

	<!-- Example: Threat level assessment -->
	<Autonomy.InfoGiverDef>
		<defName>ThreatLevelAssessment</defName>
		<label>Current threat level</label>
		<description>Assesses current threat level based on raids, hostile pawns, and map conditions</description>
		
		<sourceType>mapCondition</sourceType>
		<calculation>Max</calculation>
		
		<!-- Threat indicators -->
		<conditions>
			<li>
				<type>hostilePawnsNearby</type>
				<range>50</range>
				<weight>3.0</weight>
			</li>
			<li>
				<type>raidInProgress</type>
				<weight>5.0</weight>
			</li>
			<li>
				<type>mechanoidPresence</type>
				<weight>4.0</weight>
			</li>
		</conditions>
	</Autonomy.InfoGiverDef>

	<!-- Example: Resource stockpile levels with category-based targeting -->
	<Autonomy.InfoGiverDef>
		<defName>SteelStockpileLevel</defName>
		<label>Steel stockpile level</label>
		<description>Monitors steel reserves in stockpiles</description>
		
		<sourceType>itemCount</sourceType>
		<calculation>Sum</calculation>
		
		<targetItems>
			<li>Steel</li>
		</targetItems>
		
		<filters>
			<stockpileOnly>true</stockpileOnly>
			<excludeForbidden>true</excludeForbidden>
		</filters>
		
		<!-- Dynamic target amount based on colony size -->
		<targetAmountSource>
			<infoDefName>ColonySize</infoDefName>
			<multiplier>100</multiplier> <!-- 100 steel per colonist -->
		</targetAmountSource>
		<returnAsPercentage>true</returnAsPercentage>
	</Autonomy.InfoGiverDef>

	<!-- Example: Pawn skill assessment -->
	<Autonomy.InfoGiverDef>
		<defName>BestCookingSkill</defName>
		<label>Best cooking skill in colony</label>
		<description>Finds the highest cooking skill among all colonists</description>
		
		<sourceType>pawnStat</sourceType>
		<calculation>Max</calculation>
		
		<targetStat>Cooking</targetStat>
		
		<filters>
			<include>
				<li>player</li>
			</include>
			<exclude>
				<li>guests</li>
			</exclude>
			<!-- Filter out incapacitated pawns -->
			<hediffs>
				<li>
					<hediffClass>Hediff_Injury</hediffClass>
					<severity>&lt;0.8</severity> <!-- Severely injured can't work -->
				</li>
			</hediffs>
		</filters>
	</Autonomy.InfoGiverDef>

	<!-- Example: Weather movement impact using dynamic weather property analysis -->
	<Autonomy.InfoGiverDef>
		<defName>WeatherMovementImpact</defName>
		<label>Weather movement impact</label>
		<description>Assesses current weather impact on movement speed for outdoor work planning</description>
		
		<sourceType>weather</sourceType>
		<calculation>Weighted</calculation>
		
		<!-- Use actual weather properties instead of hardcoded weather types -->
		<weatherProperty>moveSpeedMultiplier</weatherProperty>
		<invertValue>true</invertValue> <!-- Lower move speed = higher impact -->
	</Autonomy.InfoGiverDef>

	<!-- Example: Weather accuracy impact -->
	<Autonomy.InfoGiverDef>
		<defName>WeatherAccuracyImpact</defName>
		<label>Weather accuracy impact</label>
		<description>Assesses current weather impact on shooting accuracy for combat readiness</description>
		
		<sourceType>weather</sourceType>
		<calculation>Weighted</calculation>
		
		<weatherProperty>accuracyMultiplier</weatherProperty>
		<invertValue>true</invertValue> <!-- Lower accuracy = higher impact -->
	</Autonomy.InfoGiverDef>

	<!-- Example: Need-based assessment -->
	<Autonomy.InfoGiverDef>
		<defName>ColonyRecreationNeed</defName>
		<label>Colony recreation need</label>
		<description>Assesses how much the colony needs recreation activities</description>
		
		<sourceType>pawnNeed</sourceType>
		<calculation>Avg</calculation>
		
		<targetNeed>Joy</targetNeed>
		
		<filters>
			<include>
				<li>player</li>
			</include>
		</filters>
		
		<!-- Invert the value (lower joy = higher need) -->
		<invertValue>true</invertValue>
	</Autonomy.InfoGiverDef>

	<!-- Example: Colony size for dynamic calculations -->
	<Autonomy.InfoGiverDef>
		<defName>ColonySize</defName>
		<label>Colony size</label>
		<description>Counts total number of colonists for dynamic scaling calculations</description>
		
		<sourceType>pawnCount</sourceType>
		<calculation>Count</calculation>
		
		<filters>
			<include>
				<li>player</li>
			</include>
		</filters>
	</Autonomy.InfoGiverDef>

	<!-- Example: High severity disease count -->
	<Autonomy.InfoGiverDef>
		<defName>SevereDiseaseCount</defName>
		<label>Severe disease count</label>
		<description>Counts colonists with high severity diseases that are tendable but untended</description>
		
		<sourceType>pawnCount</sourceType>
		<calculation>Count</calculation>
		
		<filters>
			<include>
				<li>player</li>
			</include>
			<hediffs>
				<li>
					<hediffClass>HediffWithComps</hediffClass>
					<tendable>true</tendable>
					<severity>&gt;0.5</severity>
				</li>
			</hediffs>
		</filters>
	</Autonomy.InfoGiverDef>

	<!-- Example: Pawns losing immunity race -->
	<Autonomy.InfoGiverDef>
		<defName>LosingImmunityRaceCount</defName>
		<label>Losing immunity race count</label>
		<description>Counts colonists whose disease severity is rising faster than their immunity</description>
		
		<sourceType>pawnCount</sourceType>
		<calculation>Count</calculation>
		
		<filters>
			<include>
				<li>player</li>
			</include>
			<hediffs>
				<li>
					<hediffClass>HediffWithComps</hediffClass>
					<tendable>true</tendable>
					<hasComps>HediffCompProperties_Immunizable</hasComps>
					<deltaImmunitySeverity>&lt;0</deltaImmunitySeverity> <!-- Special filter: immunity gaining slower than severity -->
				</li>
			</hediffs>
		</filters>
	</Autonomy.InfoGiverDef>

	<!-- Example: Raw food count for cooking priority -->
	<Autonomy.InfoGiverDef>
		<defName>RawFoodCount</defName>
		<label>Raw food available</label>
		<description>Counts raw food available for cooking</description>
		
		<sourceType>itemCount</sourceType>
		<calculation>Sum</calculation>
		<isUrgent>false</isUrgent>
		
		<!-- Use categories for better mod compatibility -->
		<targetCategories>
			<li>FoodRaw</li>
		</targetCategories>
		
		<filters>
			<stockpileOnly>true</stockpileOnly>
			<excludeForbidden>true</excludeForbidden>
		</filters>
	</Autonomy.InfoGiverDef>

	<!-- URGENT INFOGIVER EXAMPLES - These evaluate every 400 ticks for time-critical situations -->
	
	<!-- Example: Urgent hostile detection -->
	<Autonomy.InfoGiverDef>
		<defName>HostileThreats</defName>
		<label>Hostile threats on map</label>
		<description>Counts hostile pawns currently on the map - urgent evaluation for defense priorities</description>
		
		<sourceType>pawnCount</sourceType>
		<calculation>Sum</calculation>
		<isUrgent>true</isUrgent> <!-- URGENT: Evaluate every 400 ticks -->
		
		<filters>
			<include>
				<li>hostile</li>
			</include>
		</filters>
	</Autonomy.InfoGiverDef>
	
	<!-- Example: Urgent downed colonist detection -->
	<Autonomy.InfoGiverDef>
		<defName>DownedColonists</defName>
		<label>Downed colonists</label>
		<description>Counts downed colonists requiring immediate medical attention - urgent evaluation</description>
		
		<sourceType>pawnCount</sourceType>
		<calculation>Sum</calculation>
		<isUrgent>true</isUrgent> <!-- URGENT: Medical emergencies need fast response -->
		
		<filters>
			<include>
				<li>colonist</li>
			</include>
			<hediffs>
				<li>
					<hediffClass>Hediff_Injury</hediffClass>
					<severityRange>0.8~1.0</severityRange>
				</li>
			</hediffs>
		</filters>
	</Autonomy.InfoGiverDef>
	
	<!-- Example: Urgent map condition monitoring -->
	<Autonomy.InfoGiverDef>
		<defName>ToxicFalloutThreat</defName>
		<label>Toxic fallout active</label>
		<description>Monitors for active toxic fallout - urgent evaluation to adjust priorities quickly</description>
		
		<sourceType>mapCondition</sourceType>
		<calculation>Max</calculation>
		<isUrgent>true</isUrgent> <!-- URGENT: Environmental threats need immediate response -->
		
		<conditions>
			<li>
				<type>ToxicFallout</type>
				<weight>1.0</weight>
			</li>
		</conditions>
	</Autonomy.InfoGiverDef>
	
	<!-- Example: Urgent weather monitoring -->
	<Autonomy.InfoGiverDef>
		<defName>ExtremeWeatherThreat</defName>
		<label>Extreme weather conditions</label>
		<description>Monitors for extreme weather requiring immediate priority adjustments</description>
		
		<sourceType>weather</sourceType>
		<calculation>Max</calculation>
		<isUrgent>true</isUrgent> <!-- URGENT: Weather changes need quick adaptation -->
		
		<weatherProperty>weatherintensity</weatherProperty>
	</Autonomy.InfoGiverDef>

</Defs>
